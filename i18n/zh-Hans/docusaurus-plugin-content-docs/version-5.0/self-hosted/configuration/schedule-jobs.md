# 定时任务

## 清理老版本

按照项目维护者长期的使用观察一个可靠的清理老版本的逻辑是时刻关注当前主版本的所有上传版本，
之前上传的历史版本只需要保留最后一个上传构建版本基本上就满足绝大数情况，举个例子：

> 额外补充：当前逻辑相对省事但缺乏灵活度，其实有想过支持多种处理逻辑，具体参见 https://github.com/tryzealot/zealot/issues/376

```
- 2.0
  - 3
  - 2
  - 1
- 1.0.1
  - 10
  - 9
  - 8
  ...
- 1.0
  - 5
  - 4
  - 3
  ...
```

任务执行时会清理掉 1.0.1 版本包含 9 以下和 1.0 版本包含 4 以下所有版本，最终保留的版本文件是：

```
- 2.0
  - 3
  - 2
  - 1
- 1.0.1
  - 10
- 1.0
  - 5
```

如果磁盘空间有限，可以通过设置环境变量 `ZEALOT_KEEP_UPLOADS=false` 来开启定时任务的清理。

:::info

`ZEALOT_KEEP_UPLOADS` 模式是 `true` 开启状态 。

:::

## 备份

当你通过管理员面板创建任何的备份计划都会加入到定时任务队列中。
