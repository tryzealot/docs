"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[7321],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>b});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},f=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=c(n),f=r,b=p["".concat(s,".").concat(f)]||p[f]||d[f]||i;return n?o.createElement(b,l(l({ref:t},u),{},{components:n})):o.createElement(b,l({ref:t},u))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=f;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[p]="string"==typeof e?e:r,l[1]=a;for(var c=2;c<i;c++)l[c]=n[c];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}f.displayName="MDXCreateElement"},5170:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const i={},l="Schedule Jobs",a={unversionedId:"self-hosted/configuration/schedule-jobs",id:"version-4.x/self-hosted/configuration/schedule-jobs",title:"Schedule Jobs",description:"Clean old version builds",source:"@site/versioned_docs/version-4.x/self-hosted/configuration/schedule-jobs.md",sourceDirName:"self-hosted/configuration",slug:"/self-hosted/configuration/schedule-jobs",permalink:"/docs/4.x/self-hosted/configuration/schedule-jobs",draft:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/versioned_docs/version-4.x/self-hosted/configuration/schedule-jobs.md",tags:[],version:"4.x",frontMatter:{},sidebar:"selfHosted",previous:{title:"Third-party Authentication",permalink:"/docs/4.x/self-hosted/configuration/third-party-authentication"},next:{title:"Data storages",permalink:"/docs/4.x/self-hosted/storage"}},s={},c=[{value:"Clean old version builds",id:"clean-old-version-builds",level:2},{value:"Backup",id:"backup",level:2}],u={toc:c},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"schedule-jobs"},"Schedule Jobs"),(0,r.kt)("h2",{id:"clean-old-version-builds"},"Clean old version builds"),(0,r.kt)("p",null,"A reliable logic for cleaning up old versions is to keep an eye on all uploaded\nversions of the current master version, as observed by project maintainers over time."),(0,r.kt)("p",null,"Previously uploaded historical versions only need to keep the last uploaded build\nversion basically to meet the vast majority of cases, for example:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Additional: the current logic is relatively trouble-free but inflexible, in fact,\nthere is thought to support a variety of processing logic, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tryzealot/zealot/issues/376"},"https://github.com/tryzealot/zealot/issues/376"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"- 2.0\n  - 3\n  - 2\n  - 1\n- 1.0.1\n  - 10\n  - 9\n  - 8\n  ...\n- 1.0\n  - 5\n  - 4\n  - 3\n  ...\n")),(0,r.kt)("p",null,"The task will clean up all versions up to version 1.0.1 containing 9 and version 1.0 containing 4,\nleaving the final version file as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"- 2.0\n  - 3\n  - 2\n  - 1\n- 1.0.1\n  - 10\n- 1.0\n  - 5\n")),(0,r.kt)("p",null,"If disk space is limited, you can enable cleanup of timed tasks by setting the environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"ZEALOT_KEEP_UPLOADS=false"),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"ZEALOT_KEEP_UPLOADS")," set ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," by default.")),(0,r.kt)("h2",{id:"backup"},"Backup"),(0,r.kt)("p",null,"When you create any backup it will join itself to the schedule job list."))}d.isMDXComponent=!0}}]);