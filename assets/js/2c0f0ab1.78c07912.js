"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[1440],{4082:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var l=a(5893),s=a(1151),t=a(4866),r=a(5162);const i={sidebar_label:"Source code"},d="Source code",c={id:"contributing-guide/local-development/source-code",title:"Source code",description:"The following is a tutorial on local deployment development for different operating systems.",source:"@site/versioned_docs/version-5.0.0/contributing-guide/local-development/source-code.md",sourceDirName:"contributing-guide/local-development",slug:"/contributing-guide/local-development/source-code",permalink:"/docs/5.0.0/contributing-guide/local-development/source-code",draft:!1,unlisted:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/versioned_docs/version-5.0.0/contributing-guide/local-development/source-code.md",tags:[],version:"5.0.0",frontMatter:{sidebar_label:"Source code"},sidebar:"contributingGuide",previous:{title:"Visual Studio Code Dev Container Setup",permalink:"/docs/5.0.0/contributing-guide/local-development/devcontainer"}},o={},u=[{value:"Prepare dependencies",id:"prepare-dependencies",level:2},{value:"macOS",id:"macos",level:3},{value:"Install homebrew",id:"install-homebrew",level:4},{value:"Install dependencies",id:"install-dependencies",level:4},{value:"Setup Database and cache services",id:"setup-database-and-cache-services",level:4},{value:"yarn",id:"yarn",level:4},{value:"Debian (Ubuntu)",id:"debian-ubuntu",level:3},{value:"System dependencies",id:"system-dependencies",level:4},{value:"Install dependencies",id:"install-dependencies-1",level:4},{value:"Setup Database and cache services",id:"setup-database-and-cache-services-1",level:4},{value:"node",id:"node",level:4},{value:"Alpine Linux",id:"alpine-linux",level:3},{value:"System dependencies",id:"system-dependencies-1",level:4},{value:"Install dependencies",id:"install-dependencies-2",level:4},{value:"Setup Database and cache services",id:"setup-database-and-cache-services-2",level:4},{value:"Install Ruby",id:"install-ruby",level:2},{value:"Fetch source code",id:"fetch-source-code",level:2},{value:"Initialize Zealot",id:"initialize-zealot",level:2},{value:"bundler",id:"bundler",level:3},{value:"yarn",id:"yarn-1",level:3},{value:"Initialize database",id:"initialize-database",level:3},{value:"Initialize default account and demo data",id:"initialize-default-account-and-demo-data",level:3},{value:"Launch services",id:"launch-services",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"source-code",children:"Source code"}),"\n","\n","\n",(0,l.jsx)(n.p,{children:"The following is a tutorial on local deployment development for different operating systems."}),"\n",(0,l.jsx)(n.h2,{id:"prepare-dependencies",children:"Prepare dependencies"}),"\n",(0,l.jsx)(n.h3,{id:"macos",children:"macOS"}),"\n",(0,l.jsx)(n.h4,{id:"install-homebrew",children:"Install homebrew"}),"\n",(0,l.jsx)(n.p,{children:"First you need to install Xcode Command tools:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ xcode-select --install\n"})}),"\n",(0,l.jsx)(n.p,{children:"Then install Homebrew, the package management tool for macOS"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"install-dependencies",children:"Install dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ brew install redis postgresql webp imagemagick node git\n"})}),"\n",(0,l.jsx)(n.h4,{id:"setup-database-and-cache-services",children:"Setup Database and cache services"}),"\n",(0,l.jsx)(n.p,{children:"Run postgresql and redis services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ brew services start postgresql\n$ brew services start redis\n"})}),"\n",(0,l.jsx)(n.p,{children:"You also need to create a default username in Postgresql\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ createuser --superuser zealot\n\n# If you are worried about the high privilege, you can only enable the create database privilege\n$ createuser --createdb zealot\n"})}),"\n",(0,l.jsx)(n.h4,{id:"yarn",children:"yarn"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ npm install -g yarn\n"})}),"\n",(0,l.jsx)(n.h3,{id:"debian-ubuntu",children:"Debian (Ubuntu)"}),"\n",(0,l.jsx)(n.h4,{id:"system-dependencies",children:"System dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ apt update\n$ apt install -y libssl-dev tar tzdata git imagemagick libjpeg-dev libpng-dev libtiff-dev libwebp-dev\n"})}),"\n",(0,l.jsx)(n.h4,{id:"install-dependencies-1",children:"Install dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ apt install -y redis postgresql-client node\n"})}),"\n",(0,l.jsx)(n.h4,{id:"setup-database-and-cache-services-1",children:"Setup Database and cache services"}),"\n",(0,l.jsx)(n.p,{children:"Run postgresql and redis services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ systemctl postgres start\n$ systemctl redis start\n"})}),"\n",(0,l.jsx)(n.p,{children:"You also need to create a default username in Postgresql\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ initdb -D /var/lib/postgresql/data\n$ createuser --superuser zealot\n\n# If you are worried about the high privilege, you can only enable the create database privilege\n$ createuser --createdb zealot\n"})}),"\n",(0,l.jsx)(n.h4,{id:"node",children:"node"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ npm install -g yarn\n"})}),"\n",(0,l.jsx)(n.h3,{id:"alpine-linux",children:"Alpine Linux"}),"\n",(0,l.jsx)(n.h4,{id:"system-dependencies-1",children:"System dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ apk --update --no-cache add build-base libxml2 libxslt git \\\n    libxml2-dev libxslt-dev yaml-dev postgresql-dev nodejs npm yarn libwebp-dev libpng-dev tiff-dev \\\n    tzdata\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Needs install ",(0,l.jsx)(n.code,{children:"gcompat"})," if use ",(0,l.jsx)(n.code,{children:"arm"}),' architecture. or an exception will throws such like "',(0,l.jsx)(n.a,{href:"https://nokogiri.org/tutorials/installing_nokogiri.html#linux-musl-error-loading-shared-library",children:"Error loading shared library"}),'".']}),"\n",(0,l.jsx)(n.h4,{id:"install-dependencies-2",children:"Install dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ apk --update --no-cache redis postgresql\n"})}),"\n",(0,l.jsx)(n.h4,{id:"setup-database-and-cache-services-2",children:"Setup Database and cache services"}),"\n",(0,l.jsx)(n.p,{children:"Run postgresql and redis services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ rc-service postgres start\n$ rc-service redis start\n"})}),"\n",(0,l.jsx)(n.p,{children:"You also need to create a default username in Postgresql\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ initdb -D /var/lib/postgresql/data\n$ createuser --superuser zealot\n\n# If you are worried about the high privilege, you can only enable the create database privilege\n$ createuser --createdb zealot\n"})}),"\n",(0,l.jsx)(n.h2,{id:"install-ruby",children:"Install Ruby"}),"\n",(0,l.jsx)(n.p,{children:"Can be installed by either asdf, rvm as ruby version manager."}),"\n",(0,l.jsxs)(t.Z,{groupId:"install-ruby",children:[(0,l.jsxs)(r.Z,{value:"asdf",children:[(0,l.jsxs)(n.p,{children:["Following the ",(0,l.jsx)(n.a,{href:"http://asdf-vm.com/guide/getting-started.html",children:"offical install guide"})," then:"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Enable Ruby 3.2.0 YJIT need install rust 1.58+\n# Optinal install:\nasdf plugin add rust\nasdf install rust latest\nasdf global rust latest\nexport RUBY_CONFIGURE_OPTS=--enable-yjit\n\n# Required:\nasdf plugin add ruby\nasdf install ruby 3.2.0\nasdf global ruby 3.2.0\n"})})]}),(0,l.jsx)(r.Z,{value:"rvm",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ curl -sSL https://get.rvm.io | bash -s stable\n$ rvm install 3.2.0 --disable-binary\n"})})})]}),"\n",(0,l.jsx)(n.h2,{id:"fetch-source-code",children:"Fetch source code"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/tryzealot/zealot.git\n"})}),"\n",(0,l.jsx)(n.h2,{id:"initialize-zealot",children:"Initialize Zealot"}),"\n",(0,l.jsx)(n.p,{children:"All the following steps need to be performed in the zealot root directory."}),"\n",(0,l.jsx)(n.h3,{id:"bundler",children:"bundler"}),"\n",(0,l.jsx)(n.p,{children:"Install Ruby gems"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ [sudo] gem install bundler\n$ bundle install\n"})}),"\n",(0,l.jsx)(n.h3,{id:"yarn-1",children:"yarn"}),"\n",(0,l.jsx)(n.p,{children:"Install javascript packages:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ yarn install\n"})}),"\n",(0,l.jsx)(n.h3,{id:"initialize-database",children:"Initialize database"}),"\n",(0,l.jsx)(n.p,{children:"Make sure there are no problems with the connection database information, then the database tables will be created and the table structure will be created:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ rails db:create\n$ rails db:migrate\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Configuring the connection database can be done via ",(0,l.jsx)(n.a,{href:"/docs/self-hosted/configuration/environment-variables",children:"environment variables"})," or by changing the ",(0,l.jsx)(n.code,{children:"config/database.yml"})," file."]}),"\n",(0,l.jsx)(n.h3,{id:"initialize-default-account-and-demo-data",children:"Initialize default account and demo data"}),"\n",(0,l.jsx)(n.p,{children:"Initialize administrator account and sample application"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ rails db:seed\n"})}),"\n",(0,l.jsx)(n.h3,{id:"launch-services",children:"Launch services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ bin/dev\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Open brower ",(0,l.jsx)(n.code,{children:"http://localhost:3000"})]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},5162:(e,n,a)=>{a.d(n,{Z:()=>r});a(7294);var l=a(512);const s={tabItem:"tabItem_Ymn6"};var t=a(5893);function r(e){let{children:n,hidden:a,className:r}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,l.Z)(s.tabItem,r),hidden:a,children:n})}},4866:(e,n,a)=>{a.d(n,{Z:()=>w});var l=a(7294),s=a(512),t=a(2466),r=a(6550),i=a(469),d=a(1980),c=a(7392),o=a(12);function u(e){return l.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,l.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:a,attributes:l,default:s}}=e;return{value:n,label:a,attributes:l,default:s}}))}(a);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:a}=e;const s=(0,r.k6)(),t=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,d._X)(t),(0,l.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})}),[t,s])]}function g(e){const{defaultValue:n,queryString:a=!1,groupId:s}=e,t=h(e),[r,d]=(0,l.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const l=a.find((e=>e.default))??a[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:n,tabValues:t}))),[c,u]=b({queryString:a,groupId:s}),[g,m]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,t]=(0,o.Nk)(a);return[s,(0,l.useCallback)((e=>{a&&t.set(e)}),[a,t])]}({groupId:s}),v=(()=>{const e=c??g;return p({value:e,tabValues:t})?e:null})();(0,i.Z)((()=>{v&&d(v)}),[v]);return{selectedValue:r,selectValue:(0,l.useCallback)((e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);d(e),u(e),m(e)}),[u,m,t]),tabValues:t}}var m=a(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(5893);function f(e){let{className:n,block:a,selectedValue:l,selectValue:r,tabValues:i}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,t.o5)(),o=e=>{const n=e.currentTarget,a=d.indexOf(n),s=i[a].value;s!==l&&(c(n),r(s))},u=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;n=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;n=d[a]??d[d.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":a},n),children:i.map((e=>{let{value:n,label:a,attributes:t}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,ref:e=>d.push(e),onKeyDown:u,onClick:o,...t,className:(0,s.Z)("tabs__item",v.tabItem,t?.className,{"tabs__item--active":l===n}),children:a??n},n)}))})}function j(e){let{lazy:n,children:a,selectedValue:s}=e;const t=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=t.find((e=>e.props.value===s));return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,s.Z)("tabs-container",v.tabList),children:[(0,x.jsx)(f,{...e,...n}),(0,x.jsx)(j,{...e,...n})]})}function w(e){const n=(0,m.Z)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(n))}},1151:(e,n,a)=>{a.d(n,{Z:()=>i,a:()=>r});var l=a(7294);const s={},t=l.createContext(s);function r(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);