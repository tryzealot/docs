"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[3820],{7434:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>a});var n=s(5893),t=s(1151);const i={sidebar_label:"Step by step"},l="Docker deployment guide",r={id:"self-hosted/deployment/docker/step-by-step",title:"Docker deployment guide",description:"This is a handy guide to deploying with Docker, as well as a breakdown of the on-premise deployment guide.",source:"@site/versioned_docs/version-5.0.0/self-hosted/deployment/docker/step-by-step.md",sourceDirName:"self-hosted/deployment/docker",slug:"/self-hosted/deployment/docker/step-by-step",permalink:"/docs/5.0.0/self-hosted/deployment/docker/step-by-step",draft:!1,unlisted:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/versioned_docs/version-5.0.0/self-hosted/deployment/docker/step-by-step.md",tags:[],version:"5.0.0",frontMatter:{sidebar_label:"Step by step"},sidebar:"selfHosted",previous:{title:"On-premise (Docker)",permalink:"/docs/5.0.0/self-hosted/deployment/docker"},next:{title:"Kubernetes",permalink:"/docs/5.0.0/self-hosted/deployment/kubernetes"}},d={},a=[{value:"Versions",id:"versions",level:2},{value:"Registry",id:"registry",level:2},{value:"Step by Step",id:"step-by-step",level:2},{value:"Install Docker",id:"install-docker",level:3},{value:"Install Docker-Compose",id:"install-docker-compose",level:3},{value:"Configure .env file",id:"configure-env-file",level:3},{value:"Configure site domain",id:"configure-site-domain",level:3},{value:"Configure SSL certificate",id:"configure-ssl-certificate",level:3},{value:"Generate docker-compose.yml",id:"generate-docker-composeyml",level:3},{value:"Create docker volumes for persistent storage",id:"create-docker-volumes-for-persistent-storage",level:3},{value:"Pull images",id:"pull-images",level:3},{value:"Setup database data",id:"setup-database-data",level:3},{value:"Launch docker-compose",id:"launch-docker-compose",level:3},{value:"Advanced",id:"advanced",level:2},{value:"Custom volumes",id:"custom-volumes",level:3},{value:"1. Create custom docker volume",id:"1-create-custom-docker-volume",level:4},{value:"2. Change volumes part of docker-compose file",id:"2-change-volumes-part-of-docker-compose-file",level:4}];function c(e){const o={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"docker-deployment-guide",children:"Docker deployment guide"}),"\n",(0,n.jsxs)(o.p,{children:["This is a handy guide to deploying with Docker, as well as a breakdown of the ",(0,n.jsx)(o.a,{href:"/docs/self-hosted/deployment/docker",children:"on-premise deployment guide"}),"."]}),"\n",(0,n.jsx)(o.h2,{id:"versions",children:"Versions"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:["Stable version - 5.0.0/latest - ",(0,n.jsx)(o.code,{children:"ghcr.io/tryzealot/zealot:latest"})]}),"\n",(0,n.jsxs)(o.li,{children:["Nightly version - develop - ",(0,n.jsx)(o.code,{children:"ghcr.io/tryzealot/zealot:nightly"})," - Based on branch ",(0,n.jsx)(o.code,{children:"develop"})," builds per commit."]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"registry",children:"Registry"}),"\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.p,{children:["Docker hub ",(0,n.jsx)(o.a,{href:"https://web.docker.com/rs/790-SSB-375/images/privatereposfaq.pdf",children:"retrieve free team organizations"}),", zealot image stopped to push new version."]}),"\n"]}),"\n",(0,n.jsxs)(o.p,{children:["Github Container Registry: ",(0,n.jsx)(o.a,{href:"https://github.com/tryzealot/zealot/pkgs/container/zealot",children:"https://github.com/tryzealot/zealot/pkgs/container/zealot"})]}),"\n",(0,n.jsx)(o.h2,{id:"step-by-step",children:"Step by Step"}),"\n",(0,n.jsx)(o.h3,{id:"install-docker",children:"Install Docker"}),"\n",(0,n.jsxs)(o.p,{children:["Follows ",(0,n.jsx)(o.a,{href:"https://get.docker.com/",children:"official tutorial"})," to install docker."]}),"\n",(0,n.jsx)(o.h3,{id:"install-docker-compose",children:"Install Docker-Compose"}),"\n",(0,n.jsxs)(o.p,{children:["Follows ",(0,n.jsx)(o.a,{href:"https://docs.docker.com/compose/install/",children:"official tutorial"})," to install docker-compose."]}),"\n",(0,n.jsx)(o.h3,{id:"configure-env-file",children:"Configure .env file"}),"\n",(0,n.jsxs)(o.p,{children:["Download a sample ",(0,n.jsx)(o.a,{href:"https://github.com/tryzealot/zealot-docker/blob/master/config.env",children:"config.env"})," file and customize it on your own."]}),"\n",(0,n.jsx)(o.h3,{id:"configure-site-domain",children:"Configure site domain"}),"\n",(0,n.jsx)(o.p,{children:"The secondary verification will remind again if it is not configured"}),"\n",(0,n.jsx)(o.h3,{id:"configure-ssl-certificate",children:"Configure SSL certificate"}),"\n",(0,n.jsx)(o.p,{children:"Provides three ways to do this, even if the last one generates the https protocol header:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"Using Let's Encrypt SSL"}),"\n",(0,n.jsx)(o.li,{children:"Using Self-signed SSL"}),"\n",(0,n.jsx)(o.li,{children:"Using non-SSL with Zealot service (needs gateway or reverse proxy to manage SSL\uff09"}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"generate-docker-composeyml",children:"Generate docker-compose.yml"}),"\n",(0,n.jsx)(o.p,{children:"The configuration file will generate at least three services, using the first two certificates will add an additional service."}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-zealot"}),": Use reverse-generation gateway services to deliver core Web and API services"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-postgres"}),": Database service"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-redis"}),": Cache service"]}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"create-docker-volumes-for-persistent-storage",children:"Create docker volumes for persistent storage"}),"\n",(0,n.jsx)(o.p,{children:"Persistent storage Data:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-data"}),": Uploaded apps, icons and debug files."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-postgres"}),": Core database data"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.code,{children:"zealot-redis"}),": Hot cache and background jobs data"]}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"pull-images",children:"Pull images"}),"\n",(0,n.jsx)(o.p,{children:"The first time you use it, you will initialize the database,\nload the sample application data and set up the administrator account,\nwhich is required for subsequent zealot updates."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker-compose pull\n"})}),"\n",(0,n.jsx)(o.h3,{id:"setup-database-data",children:"Setup database data"}),"\n",(0,n.jsx)(o.p,{children:"The first time you use it, you will initialize the database, load the sample application data\nand set up the administrator account, which is required for subsequent zealot updates."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker-compose run --rm zealot run_upgrade\n"})}),"\n",(0,n.jsx)(o.h3,{id:"launch-docker-compose",children:"Launch docker-compose"}),"\n",(0,n.jsx)(o.p,{children:"Manual execution is required to run the service for security periods and user-defined operations:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,n.jsx)(o.h2,{id:"advanced",children:"Advanced"}),"\n",(0,n.jsx)(o.h3,{id:"custom-volumes",children:"Custom volumes"}),"\n",(0,n.jsx)(o.p,{children:"You have two t"}),"\n",(0,n.jsxs)(o.p,{children:["There are two ways to customize the path: (Assuming that the custom path is ",(0,n.jsx)(o.code,{children:"/data/zealot"}),")"]}),"\n",(0,n.jsx)(o.h4,{id:"1-create-custom-docker-volume",children:"1. Create custom docker volume"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-sh",children:"docker volume create --name zealot-data \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/zealot-data\n\ndocker volume create --name zealot-redis \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/redis\n\ndocker volume create --name zealot-postgres \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/postgres\n"})}),"\n",(0,n.jsx)(o.h4,{id:"2-change-volumes-part-of-docker-compose-file",children:"2. Change volumes part of docker-compose file"}),"\n",(0,n.jsxs)(o.p,{children:["Open ",(0,n.jsx)(o.code,{children:"docker-compose.yml"})," file and find ",(0,n.jsx)(o.code,{children:"volumes:"}),":"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-yaml",children:"volumes:\n  zealot-data:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/data\n  zealot-redis:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/redis\n\n  zealot-postgres:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/postgres\n"})})]})}function h(e={}){const{wrapper:o}={...(0,t.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},1151:(e,o,s)=>{s.d(o,{Z:()=>r,a:()=>l});var n=s(7294);const t={},i=n.createContext(t);function l(e){const o=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(i.Provider,{value:o},e.children)}}}]);