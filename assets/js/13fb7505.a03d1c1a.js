"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[6780],{2888:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var t=i(5893),s=i(1151);const o={},r="Third-party Authentication",l={id:"self-hosted/configuration/third-party-authentication",title:"Third-party Authentication",description:"Zealot supports authorized logins using supported third-party services, which can be currently configured via the following environment variables or in the settings page of the admin panel.",source:"@site/versioned_docs/version-5.1.0/self-hosted/configuration/third-party-authentication.md",sourceDirName:"self-hosted/configuration",slug:"/self-hosted/configuration/third-party-authentication",permalink:"/docs/self-hosted/configuration/third-party-authentication",draft:!1,unlisted:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/versioned_docs/version-5.1.0/self-hosted/configuration/third-party-authentication.md",tags:[],version:"5.1.0",frontMatter:{},sidebar:"selfHosted",previous:{title:"Environment Variables",permalink:"/docs/self-hosted/configuration/environment-variables"},next:{title:"Schedule Jobs",permalink:"/docs/self-hosted/configuration/schedule-jobs"}},a={},c=[{value:"Gitlab",id:"gitlab",level:2},{value:"Google",id:"google",level:2},{value:"Feishu (Lark)",id:"feishu-lark",level:2},{value:"LDAP",id:"ldap",level:2},{value:"OpenID Connect",id:"openid-connect",level:2},{value:"Auto-discovery",id:"auto-discovery",level:3},{value:"Manual",id:"manual",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"third-party-authentication",children:"Third-party Authentication"}),"\n",(0,t.jsx)(n.p,{children:"Zealot supports authorized logins using supported third-party services, which can be currently configured via the following environment variables or in the settings page of the admin panel."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Service"}),(0,t.jsx)(n.th,{children:"provider"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Feishu"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"feishu"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Gitlab"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gitlab"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Google"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"google_oauth2"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LDAP"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ldap"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OpenID Connect"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"openid_connect"})})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"If the above services need to set the callback address please set it uniformly as follows"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://zealot.com/users/auth/:provider/callback\n"})}),"\n",(0,t.jsxs)(n.p,{children:["where ",(0,t.jsx)(n.code,{children:":provider"})," is the identifier of the above supported third-party service, for example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# if Google is enabled, then replace `:provider` with `google_oauth2`.\nhttp://zealot.com/users/auth/google_oauth2/callback\n"})}),"\n",(0,t.jsx)(n.h2,{id:"gitlab",children:"Gitlab"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Register a Gitlab ",(0,t.jsx)(n.a,{href:"http://gitlab.com",children:"On line"})," account or use self-host service"]}),"\n",(0,t.jsx)(n.li,{children:"Create an application in Preferences -> Applications page."}),"\n",(0,t.jsxs)(n.li,{children:["Configure ",(0,t.jsx)(n.code,{children:"Redirect URI"})," such like ",(0,t.jsx)(n.code,{children:"http://zealot.com/users/auth/gitlab/callback"})," (replace the domain in your case)"]}),"\n",(0,t.jsxs)(n.li,{children:["Check scope: ",(0,t.jsx)(n.code,{children:"read_user"}),"\uff0cBy default zealot only uses this license, if your enable scope is ",(0,t.jsx)(n.code,{children:"api"})," that's fine too"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GITLAB_ENABLED=true\nGITLAB_SITE=https://gitlab.com/api/v4\nGITLAB_SCOPE=read_user\nGITLAB_APP_ID=\nGITLAB_SECRET=\n"})}),"\n",(0,t.jsx)(n.h2,{id:"google",children:"Google"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Register a Google account"}),"\n",(0,t.jsxs)(n.li,{children:["Enable ",(0,t.jsx)(n.a,{href:"https://console.cloud.google.com/apis/dashboard",children:"Google Cloud Platform"})," service"]}),"\n",(0,t.jsx)(n.li,{children:"Choose or create a Project then go to Credentials page"}),"\n",(0,t.jsxs)(n.li,{children:["Create OAuth Client ID with Web Application, and configure Authorized redirect URI such like ",(0,t.jsx)(n.code,{children:"http://zealot.com/users/auth/google_oauth2/callback"})," (replace the domain in your case)"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GOOGLE_OAUTH_ENABLED=true\nGOOGLE_CLIENT_ID=\nGOOGLE_SECRET=\n"})}),"\n",(0,t.jsx)(n.h2,{id:"feishu-lark",children:"Feishu (Lark)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Register a feishu (lark) account and download the Phone app."}),"\n",(0,t.jsxs)(n.li,{children:["Enable ",(0,t.jsx)(n.a,{href:"https://open.feishu.cn/app/",children:"Open platform"})," and create application to get app_id, app_secret"]}),"\n",(0,t.jsxs)(n.li,{children:["Configure callback url such like ",(0,t.jsx)(n.code,{children:"http://zealot.com/users/auth/feishu/callback"})," (replace the domain in your case)"]}),"\n",(0,t.jsxs)(n.li,{children:["Check user filed information scope: ",(0,t.jsx)(n.code,{children:"email address"})," (Optional)"]}),"\n",(0,t.jsx)(n.li,{children:"Create a version and publish"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"FEISHU_ENABLED=true\nFEISHU_APP_ID=\nFEISHU_APP_SECRET=\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ldap",children:"LDAP"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'LDAP_ENABLED=true\nLDAP_HOST=10.0.0.1\nLDAP_PORT=389\nLDAP_METHOD=plain\nLDAP_BIND_DN="cn=Manager,dc=example,dc=com"\nLDAP_PASSWORD=password\nLDAP_BASE="ou=People,dc=example,dc=com"\nLDAP_UID=uid\n'})}),"\n",(0,t.jsx)(n.h2,{id:"openid-connect",children:"OpenID Connect"}),"\n",(0,t.jsx)(n.p,{children:"Supports both auto-discovery mode and manual settings."}),"\n",(0,t.jsx)(n.h3,{id:"auto-discovery",children:"Auto-discovery"}),"\n",(0,t.jsxs)(n.p,{children:["Turning on auto-discovery mode will automatically fetch the ",(0,t.jsx)(n.code,{children:"[OIDC_ISSUER_URL]/.well-known/openid-configuration"})," configuration."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"OIDC_ENABLED=true\nOIDC_CLIENT_ID=\nOIDC_CLIENT_SECRET=\nOIDC_ISSUER_URL=https://oidc.example.com\nOIDC_DISCOVERY=true\n"})}),"\n",(0,t.jsx)(n.h3,{id:"manual",children:"Manual"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"OIDC_ENABLED=true\nOIDC_CLIENT_ID=\nOIDC_CLIENT_SECRET=\nOIDC_ISSUER_URL=https://oidc.example.com\nOIDC_AUTH_URI=/authorize\nOIDC_TOKEN_URI=/token\nOIDC_USERINFO_URI=/userinfo\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Above ",(0,t.jsx)(n.code,{children:"OIDC_AUTH_URI"}),", ",(0,t.jsx)(n.code,{children:"OIDC_TOKEN_URI"}),", ",(0,t.jsx)(n.code,{children:"OIDC_USERINFO_URI"})," will use the default path as above if not set."]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>r});var t=i(7294);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);