"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[8575],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>m});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=a.createContext({}),d=function(e){var t=a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(o),m=n,k=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return o?a.createElement(k,l(l({ref:t},p),{},{components:o})):a.createElement(k,l({ref:t},p))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,l[1]=i;for(var d=2;d<r;d++)l[d]=o[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},3966:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var a=o(7462),n=(o(7294),o(3905));const r={sidebar_label:"Step by step"},l="Docker deployment guide",i={unversionedId:"self-hosted/deployment/docker/step-by-step",id:"self-hosted/deployment/docker/step-by-step",title:"Docker deployment guide",description:"This is a handy guide to deploying with Docker, as well as a breakdown of the on-premise deployment guide.",source:"@site/docs/self-hosted/deployment/docker/step-by-step.md",sourceDirName:"self-hosted/deployment/docker",slug:"/self-hosted/deployment/docker/step-by-step",permalink:"/docs/self-hosted/deployment/docker/step-by-step",draft:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/docs/self-hosted/deployment/docker/step-by-step.md",tags:[],version:"current",frontMatter:{sidebar_label:"Step by step"},sidebar:"selfHosted",previous:{title:"On-premise (Docker)",permalink:"/docs/self-hosted/deployment/docker"},next:{title:"Kubernetes",permalink:"/docs/self-hosted/deployment/kubernetes"}},s={},d=[{value:"Versions",id:"versions",level:2},{value:"Registry",id:"registry",level:2},{value:"Step by Step",id:"step-by-step",level:2},{value:"Install Docker",id:"install-docker",level:3},{value:"Install Docker-Compose",id:"install-docker-compose",level:3},{value:"Configure .env file",id:"configure-env-file",level:3},{value:"Configure site domain",id:"configure-site-domain",level:3},{value:"Configure SSL certificate",id:"configure-ssl-certificate",level:3},{value:"Generate docker-compose.yml",id:"generate-docker-composeyml",level:3},{value:"Create docker volumes for persistent storage",id:"create-docker-volumes-for-persistent-storage",level:3},{value:"Pull images",id:"pull-images",level:3},{value:"Setup database data",id:"setup-database-data",level:3},{value:"Launch docker-compose",id:"launch-docker-compose",level:3},{value:"Advanced",id:"advanced",level:2},{value:"Custom volumes",id:"custom-volumes",level:3},{value:"1. Create custom docker volume",id:"1-create-custom-docker-volume",level:4},{value:"2. Change volumes part of docker-compose file",id:"2-change-volumes-part-of-docker-compose-file",level:4}],p={toc:d};function c(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"docker-deployment-guide"},"Docker deployment guide"),(0,n.kt)("p",null,"This is a handy guide to deploying with Docker, as well as a breakdown of the ",(0,n.kt)("a",{parentName:"p",href:"/docs/self-hosted/deployment/docker"},"on-premise deployment guide"),"."),(0,n.kt)("h2",{id:"versions"},"Versions"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Stable version - 4.5.1/latest - ",(0,n.kt)("inlineCode",{parentName:"li"},"ghcr.io/tryzealot/zealot:latest")),(0,n.kt)("li",{parentName:"ul"},"Nightly version - develop - ",(0,n.kt)("inlineCode",{parentName:"li"},"ghcr.io/tryzealot/zealot:nightly")," - Based on branch ",(0,n.kt)("inlineCode",{parentName:"li"},"develop")," builds per commit.")),(0,n.kt)("h2",{id:"registry"},"Registry"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Github Container Registry: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/tryzealot/zealot/pkgs/container/zealot"},"https://github.com/tryzealot/zealot/pkgs/container/zealot")," (",(0,n.kt)("strong",{parentName:"li"},"Recommand"),")"),(0,n.kt)("li",{parentName:"ul"},"Docker Hub: ",(0,n.kt)("a",{parentName:"li",href:"https://hub.docker.com/r/tryzealot/zealot"},"https://hub.docker.com/r/tryzealot/zealot"))),(0,n.kt)("h2",{id:"step-by-step"},"Step by Step"),(0,n.kt)("h3",{id:"install-docker"},"Install Docker"),(0,n.kt)("p",null,"Follows ",(0,n.kt)("a",{parentName:"p",href:"https://get.docker.com/"},"official tutorial")," to install docker."),(0,n.kt)("h3",{id:"install-docker-compose"},"Install Docker-Compose"),(0,n.kt)("p",null,"Follows ",(0,n.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"official tutorial")," to install docker-compose."),(0,n.kt)("h3",{id:"configure-env-file"},"Configure .env file"),(0,n.kt)("p",null,"Download a sample ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/tryzealot/zealot-docker/blob/master/config.env"},"config.env")," file and customize it on your own."),(0,n.kt)("h3",{id:"configure-site-domain"},"Configure site domain"),(0,n.kt)("p",null,"The secondary verification will remind again if it is not configured"),(0,n.kt)("h3",{id:"configure-ssl-certificate"},"Configure SSL certificate"),(0,n.kt)("p",null,"Provides three ways to do this, even if the last one generates the https protocol header:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Using Let's Encrypt SSL"),(0,n.kt)("li",{parentName:"ul"},"Using Self-signed SSL"),(0,n.kt)("li",{parentName:"ul"},"Using non-SSL with Zealot service (needs gateway or reverse proxy to manage SSL\uff09")),(0,n.kt)("h3",{id:"generate-docker-composeyml"},"Generate docker-compose.yml"),(0,n.kt)("p",null,"The configuration file will generate at least three services, using the first two certificates will add an additional service."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-zealot"),": Use reverse-generation gateway services to deliver core Web and API services"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-postgres"),": Database service"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-redis"),": Cache service")),(0,n.kt)("h3",{id:"create-docker-volumes-for-persistent-storage"},"Create docker volumes for persistent storage"),(0,n.kt)("p",null,"Persistent storage Data:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-data"),": Uploaded apps, icons and debug files."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-postgres"),": Core database data"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-redis"),": Hot cache and background jobs data")),(0,n.kt)("h3",{id:"pull-images"},"Pull images"),(0,n.kt)("p",null,"The first time you use it, you will initialize the database,\nload the sample application data and set up the administrator account,\nwhich is required for subsequent zealot updates."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose pull\n")),(0,n.kt)("h3",{id:"setup-database-data"},"Setup database data"),(0,n.kt)("p",null,"The first time you use it, you will initialize the database, load the sample application data\nand set up the administrator account, which is required for subsequent zealot updates."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose run --rm zealot run_upgrade\n")),(0,n.kt)("h3",{id:"launch-docker-compose"},"Launch docker-compose"),(0,n.kt)("p",null,"Manual execution is required to run the service for security periods and user-defined operations:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,n.kt)("h2",{id:"advanced"},"Advanced"),(0,n.kt)("h3",{id:"custom-volumes"},"Custom volumes"),(0,n.kt)("p",null,"You have two t"),(0,n.kt)("p",null,"There are two ways to customize the path: (Assuming that the custom path is ",(0,n.kt)("inlineCode",{parentName:"p"},"/data/zealot"),")"),(0,n.kt)("h4",{id:"1-create-custom-docker-volume"},"1. Create custom docker volume"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"docker volume create --name zealot-data \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/zealot-data\n\ndocker volume create --name zealot-redis \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/redis\n\ndocker volume create --name zealot-postgres \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/postgres\n")),(0,n.kt)("h4",{id:"2-change-volumes-part-of-docker-compose-file"},"2. Change volumes part of docker-compose file"),(0,n.kt)("p",null,"Open ",(0,n.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file and find ",(0,n.kt)("inlineCode",{parentName:"p"},"volumes:"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"volumes:\n  zealot-data:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/data\n  zealot-redis:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/redis\n\n  zealot-postgres:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/postgres\n")))}c.isMDXComponent=!0}}]);