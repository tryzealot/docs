"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[2994],{4410:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>o});var i=l(5893),s=l(1151);const c={},t="\u7b2c\u4e09\u65b9\u767b\u5f55",d={id:"self-hosted/configuration/third-party-authentication",title:"\u7b2c\u4e09\u65b9\u767b\u5f55",description:"Zealot \u652f\u6301\u4f7f\u7528\u5df2\u7ecf\u652f\u6301\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\u6388\u6743\u767b\u5f55\uff0c\u5f53\u524d\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u7684\u73af\u5883\u53d8\u91cf\u6216\u8005\u5728\u7ba1\u7406\u5458\u9762\u677f\u7684\u8bbe\u7f6e\u9875\u9762\u914d\u7f6e\u3002",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-5.0.0/self-hosted/configuration/third-party-authentication.md",sourceDirName:"self-hosted/configuration",slug:"/self-hosted/configuration/third-party-authentication",permalink:"/zh-Hans/docs/5.0.0/self-hosted/configuration/third-party-authentication",draft:!1,unlisted:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/versioned_docs/version-5.0.0/self-hosted/configuration/third-party-authentication.md",tags:[],version:"5.0.0",frontMatter:{},sidebar:"selfHosted",previous:{title:"\u73af\u5883\u53d8\u91cf",permalink:"/zh-Hans/docs/5.0.0/self-hosted/configuration/environment-variables"},next:{title:"\u5b9a\u65f6\u4efb\u52a1",permalink:"/zh-Hans/docs/5.0.0/self-hosted/configuration/schedule-jobs"}},r={},o=[{value:"\u98de\u4e66",id:"\u98de\u4e66",level:2},{value:"Gitlab",id:"gitlab",level:2},{value:"Google",id:"google",level:2},{value:"LDAP",id:"ldap",level:2},{value:"OpenID Connect",id:"openid-connect",level:2},{value:"\u81ea\u52a8\u53d1\u73b0",id:"\u81ea\u52a8\u53d1\u73b0",level:3},{value:"\u624b\u52a8\u914d\u7f6e",id:"\u624b\u52a8\u914d\u7f6e",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"\u7b2c\u4e09\u65b9\u767b\u5f55",children:"\u7b2c\u4e09\u65b9\u767b\u5f55"}),"\n",(0,i.jsx)(n.p,{children:"Zealot \u652f\u6301\u4f7f\u7528\u5df2\u7ecf\u652f\u6301\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\u6388\u6743\u767b\u5f55\uff0c\u5f53\u524d\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u7684\u73af\u5883\u53d8\u91cf\u6216\u8005\u5728\u7ba1\u7406\u5458\u9762\u677f\u7684\u8bbe\u7f6e\u9875\u9762\u914d\u7f6e\u3002"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7b2c\u4e09\u65b9\u670d\u52a1"}),(0,i.jsx)(n.th,{children:"\u6807\u8bc6\u7b26"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u98de\u4e66"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"feishu"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Gitlab"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gitlab"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Google"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"google_oauth2"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LDAP"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ldap"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OpenID Connect"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"openid_connect"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u4ee5\u4e0a\u670d\u52a1\u9700\u8981\u8bbe\u7f6e\u56de\u8c03\u5730\u5740\u7684\u8bdd\u8bf7\u7edf\u4e00\u8bbe\u7f6e\u4e3a\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://zealot.com/users/auth/:provider/callback\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,i.jsx)(n.code,{children:":provider"})," \u662f\u4e0a\u9762\u652f\u6301\u7b2c\u4e09\u65b9\u670d\u52a1\u7684\u6807\u8bc6\u7b26\uff0c\u4f8b\u5982\u5f00\u542f\u98de\u4e66\u90a3\u5c31\u628a ",(0,i.jsx)(n.code,{children:":provider"})," \u66ff\u6362\u6210 ",(0,i.jsx)(n.code,{children:"feishu"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u98de\u4e66",children:"\u98de\u4e66"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u53bb\u6ce8\u518c\u4e00\u4e2a\u98de\u4e66\u8d26\u53f7\u5e76\u4e0b\u8f7d\u624b\u673a App"}),"\n",(0,i.jsxs)(n.li,{children:["\u6ce8\u518c",(0,i.jsx)(n.a,{href:"https://open.feishu.cn/app/",children:"\u98de\u4e66\u5f00\u53d1\u5e73\u53f0"}),"\u5e76\u521b\u5efa\u4f01\u4e1a\u81ea\u5efa\u5e94\u7528\u83b7\u5f97 app_id, app_secret"]}),"\n",(0,i.jsxs)(n.li,{children:["\u586b\u5199 callback url \u4e3a ",(0,i.jsx)(n.code,{children:"http://zealot.com/users/auth/feishu/callback"})," (\u57df\u540d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6dfb\u52a0\u7528\u6237\u5b57\u6bb5\u4fe1\u606f\u6388\u6743\uff1a",(0,i.jsx)(n.code,{children:"email \u5730\u5740"})," \uff08\u53ef\u9009\uff09"]}),"\n",(0,i.jsx)(n.li,{children:"\u81f3\u5c11\u52fe\u9009\u4e00\u4e2a\u5e94\u7528\u65b9\u5f0f\u5e76\u521b\u5efa\u65b0\u7248\u672c\u540e\u53d1\u5e03"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"FEISHU_ENABLED=true\nFEISHU_APP_ID=\nFEISHU_APP_SECRET=\n"})}),"\n",(0,i.jsx)(n.h2,{id:"gitlab",children:"Gitlab"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u6ce8\u518c Gitlab ",(0,i.jsx)(n.a,{href:"http://gitlab.com",children:"\u5b98\u65b9"}),"\u8d26\u6237\u6216\u81ea\u90e8\u7f72 Gitlab \u670d\u52a1"]}),"\n",(0,i.jsx)(n.li,{children:"\u5728\u7528\u6237\u8bbe\u7f6e\uff08Preferences\uff09 -> \u5e94\u7528\uff08Applications\uff09 \u521b\u5efa\u4e00\u4e2a\u65b0\u5e94\u7528"}),"\n",(0,i.jsxs)(n.li,{children:["\u56de\u8c03\u5730\u5740\uff08Redirect URI\uff09 \u914d\u7f6e\u4e3a  ",(0,i.jsx)(n.code,{children:"http://zealot.com/users/auth/gitlab/callback"})," (\u57df\u540d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:["\u6dfb\u52a0\u7528\u6237\u5b57\u6bb5\u4fe1\u606f\u6388\u6743\uff08scope\uff09\uff1a",(0,i.jsx)(n.code,{children:"read_user"}),"\uff0c\u9ed8\u8ba4 zealot \u4ec5\u7528\u6b64\u6388\u6743\uff0c\u5982\u679c\u4f60\u7684\u6388\u6743\u8303\u56f4\u662f ",(0,i.jsx)(n.code,{children:"api"})," \u4e5f\u6ca1\u95ee\u9898"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GITLAB_ENABLED=true\nGITLAB_SITE=https://gitlab.com/api/v4\nGITLAB_SCOPE=read_user\nGITLAB_APP_ID=\nGITLAB_SECRET=\n"})}),"\n",(0,i.jsx)(n.h2,{id:"google",children:"Google"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6ce8\u518c Google \u8d26\u53f7"}),"\n",(0,i.jsxs)(n.li,{children:["\u5f00\u901a ",(0,i.jsx)(n.a,{href:"https://console.cloud.google.com/apis/dashboard",children:"Google Cloud Platform"})," \u670d\u52a1"]}),"\n",(0,i.jsx)(n.li,{children:"\u9009\u62e9\u6216\u521b\u5efa Project \u5e76\u524d\u5f80 Credentials"}),"\n",(0,i.jsxs)(n.li,{children:["\u521b\u5efa OAuth Client ID \u9009\u62e9 Web Application \u540e\u6dfb\u52a0\u56de\u8c03\u5730\u5740\uff08Authorized redirect URI\uff09 \u914d\u7f6e\u4e3a ",(0,i.jsx)(n.code,{children:"http://zealot.com/users/auth/google_oauth2/callback"})," (\u57df\u540d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09"]}),"\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa\u6210\u529f\u540e\u83b7\u5f97 Client ID \u548c Client Secret"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GOOGLE_OAUTH_ENABLED=true\nGOOGLE_CLIENT_ID=\nGOOGLE_SECRET=\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ldap",children:"LDAP"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u81ea\u90e8\u7f72\u6216\u4f7f\u7528\u73b0\u6709\u7684 LDAP \u670d\u52a1"}),"\n",(0,i.jsx)(n.li,{children:"\u81ea\u914d\u7f6e\u6216\u67e5\u627e\u5982\u4e0b\u53c2\u6570\u7684\u503c"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'LDAP_ENABLED=true\nLDAP_HOST=10.0.0.1\nLDAP_PORT=389\nLDAP_METHOD=plain\nLDAP_BIND_DN="cn=Manager,dc=example,dc=com"\nLDAP_PASSWORD=password\nLDAP_BASE="ou=People,dc=example,dc=com"\nLDAP_UID=uid\n'})}),"\n",(0,i.jsx)(n.h2,{id:"openid-connect",children:"OpenID Connect"}),"\n",(0,i.jsx)(n.p,{children:"\u652f\u6301\u5f00\u542f\u81ea\u52a8\u53d1\u73b0\u6a21\u5f0f\u548c\u624b\u52a8\u8bbe\u7f6e\u4e24\u79cd\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.h3,{id:"\u81ea\u52a8\u53d1\u73b0",children:"\u81ea\u52a8\u53d1\u73b0"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f00\u542f\u81ea\u52a8\u53d1\u73b0\u6a21\u5f0f\u4f1a\u81ea\u52a8\u83b7\u53d6 ",(0,i.jsx)(n.code,{children:"[OIDC_ISSUER_URL]/.well-known/openid-configuration"})," \u914d\u7f6e\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"OIDC_ENABLED=true\nOIDC_CLIENT_ID=\nOIDC_CLIENT_SECRET=\nOIDC_ISSUER_URL=https://oidc.example.com\nOIDC_DISCOVERY=true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u624b\u52a8\u914d\u7f6e",children:"\u624b\u52a8\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"OIDC_ENABLED=true\nOIDC_CLIENT_ID=\nOIDC_CLIENT_SECRET=\nOIDC_ISSUER_URL=https://oidc.example.com\nOIDC_AUTH_URI=/authorize\nOIDC_TOKEN_URI=/token\nOIDC_USERINFO_URI=/userinfo\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u4e0a ",(0,i.jsx)(n.code,{children:"OIDC_AUTH_URI"}),"\uff0c",(0,i.jsx)(n.code,{children:"OIDC_TOKEN_URI"}),"\uff0c",(0,i.jsx)(n.code,{children:"OIDC_USERINFO_URI"})," \u672a\u8bbe\u7f6e\u65f6\u4f1a\u4f7f\u7528\u5982\u4e0a\u7684\u9ed8\u8ba4\u8def\u5f84\u3002"]})]})}function a(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},1151:(e,n,l)=>{l.d(n,{Z:()=>d,a:()=>t});var i=l(7294);const s={},c=i.createContext(s);function t(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);