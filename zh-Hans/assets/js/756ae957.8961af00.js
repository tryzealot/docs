"use strict";(self.webpackChunkzealot_new_docs=self.webpackChunkzealot_new_docs||[]).push([[6751],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>m});var l=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,l)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t){if(null==e)return{};var o,l,n=function(e,t){if(null==e)return{};var o,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)o=r[l],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)o=r[l],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var i=l.createContext({}),d=function(e){var t=l.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},c=function(e){var t=d(e.components);return l.createElement(i.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},u=l.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=d(o),m=n,k=u["".concat(i,".").concat(m)]||u[m]||s[m]||r;return o?l.createElement(k,a(a({ref:t},c),{},{components:o})):l.createElement(k,a({ref:t},c))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,a=new Array(r);a[0]=u;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:n,a[1]=p;for(var d=2;d<r;d++)a[d]=o[d];return l.createElement.apply(null,a)}return l.createElement.apply(null,o)}u.displayName="MDXCreateElement"},6292:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>s,frontMatter:()=>r,metadata:()=>p,toc:()=>d});var l=o(7462),n=(o(7294),o(3905));const r={sidebar_label:"\u8be6\u7ec6\u6b65\u9aa4"},a="Docker \u624b\u628a\u624b\u90e8\u7f72\u6587\u6863",p={unversionedId:"self-hosted/deployment/docker/step-by-step",id:"self-hosted/deployment/docker/step-by-step",title:"Docker \u624b\u628a\u624b\u90e8\u7f72\u6587\u6863",description:"\u8fd9\u662f\u4e00\u7bc7\u624b\u628a\u624b\u6765\u6307\u5bfc\u4f7f\u7528 Docker \u90e8\u7f72\u6587\u6863\uff0c\u540c\u65f6\u4e5f\u662f\u89e3\u91caDocker \u90e8\u7f72 Zealot \u6307\u5357\u7684\u5206\u89e3",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/self-hosted/deployment/docker/step-by-step.md",sourceDirName:"self-hosted/deployment/docker",slug:"/self-hosted/deployment/docker/step-by-step",permalink:"/zh-Hans/docs/self-hosted/deployment/docker/step-by-step",draft:!1,editUrl:"https://github.com/tryzealot/docs/tree/main/docs/self-hosted/deployment/docker/step-by-step.md",tags:[],version:"current",frontMatter:{sidebar_label:"\u8be6\u7ec6\u6b65\u9aa4"},sidebar:"selfHosted",previous:{title:"Docker",permalink:"/zh-Hans/docs/self-hosted/deployment/docker"},next:{title:"Kubernetes",permalink:"/zh-Hans/docs/self-hosted/deployment/kubernetes"}},i={},d=[{value:"\u7248\u672c\u5217\u8868",id:"\u7248\u672c\u5217\u8868",level:2},{value:"\u955c\u50cf\u4ed3\u5e93",id:"\u955c\u50cf\u4ed3\u5e93",level:2},{value:"\u6b65\u9aa4\u89e3\u6790",id:"\u6b65\u9aa4\u89e3\u6790",level:2},{value:"\u5b89\u88c5 Docker",id:"\u5b89\u88c5-docker",level:3},{value:"\u5b89\u88c5 Docker-Compose",id:"\u5b89\u88c5-docker-compose",level:3},{value:"\u751f\u6210 .env \u914d\u7f6e\u6587\u4ef6",id:"\u751f\u6210-env-\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u914d\u7f6e\u57df\u540d",id:"\u914d\u7f6e\u57df\u540d",level:3},{value:"\u914d\u7f6e\u8bc1\u4e66",id:"\u914d\u7f6e\u8bc1\u4e66",level:3},{value:"\u751f\u6210 docker-compose.yml",id:"\u751f\u6210-docker-composeyml",level:3},{value:"\u521b\u5efa\u6301\u4e45\u5316\u5b58\u50a8\u7684 docker volumes",id:"\u521b\u5efa\u6301\u4e45\u5316\u5b58\u50a8\u7684-docker-volumes",level:3},{value:"\u62c9\u53d6\uff08\u66f4\u65b0\uff09\u955c\u50cf",id:"\u62c9\u53d6\u66f4\u65b0\u955c\u50cf",level:3},{value:"\u8bbe\u7f6e\u6570\u636e\u5e93\u6570\u636e",id:"\u8bbe\u7f6e\u6570\u636e\u5e93\u6570\u636e",level:3},{value:"\u8fd0\u884c docker-compose",id:"\u8fd0\u884c-docker-compose",level:3},{value:"\u9ad8\u7ea7\u914d\u7f6e",id:"\u9ad8\u7ea7\u914d\u7f6e",level:2},{value:"\u81ea\u5b9a\u4e49 volume \u8def\u5f84",id:"\u81ea\u5b9a\u4e49-volume-\u8def\u5f84",level:3},{value:"1. \u521b\u5efa volume \u81ea\u5b9a\u4e49\u8def\u5f84",id:"1-\u521b\u5efa-volume-\u81ea\u5b9a\u4e49\u8def\u5f84",level:4},{value:"2. \u4fee\u6539 docker-compose \u7684 volumes \u90e8\u5206",id:"2-\u4fee\u6539-docker-compose-\u7684-volumes-\u90e8\u5206",level:4}],c={toc:d};function s(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,l.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"docker-\u624b\u628a\u624b\u90e8\u7f72\u6587\u6863"},"Docker \u624b\u628a\u624b\u90e8\u7f72\u6587\u6863"),(0,n.kt)("p",null,"\u8fd9\u662f\u4e00\u7bc7\u624b\u628a\u624b\u6765\u6307\u5bfc\u4f7f\u7528 Docker \u90e8\u7f72\u6587\u6863\uff0c\u540c\u65f6\u4e5f\u662f\u89e3\u91ca",(0,n.kt)("a",{parentName:"p",href:"/docs/self-hosted/deployment/docker"},"Docker \u90e8\u7f72 Zealot \u6307\u5357"),"\u7684\u5206\u89e3"),(0,n.kt)("h2",{id:"\u7248\u672c\u5217\u8868"},"\u7248\u672c\u5217\u8868"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7a33\u5b9a\u7248\u672c - 4.7.0/latest - ",(0,n.kt)("inlineCode",{parentName:"li"},"ghcr.io/tryzealot/zealot:latest")),(0,n.kt)("li",{parentName:"ul"},"\u6d4b\u8bd5\u7248\u672c - develop - ",(0,n.kt)("inlineCode",{parentName:"li"},"ghcr.io/tryzealot/zealot:nightly")," - \u57fa\u4e8e develop \u5206\u652f\u6bcf\u6b21\u63d0\u4ea4\u6784\u5efa\u7684\u7248\u672c")),(0,n.kt)("h2",{id:"\u955c\u50cf\u4ed3\u5e93"},"\u955c\u50cf\u4ed3\u5e93"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Github Container Registry: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/tryzealot/zealot/pkgs/container/zealot"},"https://github.com/tryzealot/zealot/pkgs/container/zealot")," (",(0,n.kt)("strong",{parentName:"li"},"\u63a8\u8350"),")"),(0,n.kt)("li",{parentName:"ul"},"Docker Hub: ",(0,n.kt)("a",{parentName:"li",href:"https://hub.docker.com/r/tryzealot/zealot"},"https://hub.docker.com/r/tryzealot/zealot"))),(0,n.kt)("h2",{id:"\u6b65\u9aa4\u89e3\u6790"},"\u6b65\u9aa4\u89e3\u6790"),(0,n.kt)("h3",{id:"\u5b89\u88c5-docker"},"\u5b89\u88c5 Docker"),(0,n.kt)("p",null,"\u6309\u7167",(0,n.kt)("a",{parentName:"p",href:"https://get.docker.com/"},"\u5b98\u65b9\u6559\u7a0b"),"\u5b89\u88c5"),(0,n.kt)("h3",{id:"\u5b89\u88c5-docker-compose"},"\u5b89\u88c5 Docker-Compose"),(0,n.kt)("p",null,"\u6309\u7167",(0,n.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"\u5b98\u65b9\u6559\u7a0b"),"\u5b89\u88c5"),(0,n.kt)("h3",{id:"\u751f\u6210-env-\u914d\u7f6e\u6587\u4ef6"},"\u751f\u6210 .env \u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("p",null,"\u4ece\u9884\u5148 ",(0,n.kt)("inlineCode",{parentName:"p"},"config.env")," \u914d\u7f6e\u6587\u4ef6\u590d\u5236\u4e00\u4efd\u90e8\u7f72\u4f7f\u7528\u7684\u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("h3",{id:"\u914d\u7f6e\u57df\u540d"},"\u914d\u7f6e\u57df\u540d"),(0,n.kt)("p",null,"\u4e8c\u6b21\u6821\u9a8c\u5982\u679c\u6ca1\u6709\u914d\u7f6e\u4f1a\u518d\u63d0\u9192"),(0,n.kt)("h3",{id:"\u914d\u7f6e\u8bc1\u4e66"},"\u914d\u7f6e\u8bc1\u4e66"),(0,n.kt)("p",null,"\u90e8\u7f72\u811a\u672c\u63d0\u4f9b\u4e09\u79cd\u65b9\u5f0f\uff0c\u5c31\u7b97\u4f7f\u7528\u6700\u540e\u4e00\u79cd\u751f\u6210\u7684\u4e5f\u662f https \u7684\u534f\u8bae\u5934"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528 Let's Encrypt \u8bc1\u4e66"),(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66"),(0,n.kt)("li",{parentName:"ul"},"\u7eaf Zealot \u670d\u52a1\uff08\u9700\u53cd\u4ee3\u7f51\u5173\u6216\u8d1f\u8f7d\u5747\u8861\u751f\u6210 SSL \u8bc1\u4e66\uff09")),(0,n.kt)("h3",{id:"\u751f\u6210-docker-composeyml"},"\u751f\u6210 docker-compose.yml"),(0,n.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\u4f1a\u751f\u6210\u81f3\u5c11\u56db\u4e2a\u670d\u52a1\uff08service\uff09\uff0c\u4f7f\u7528\u4e0a\u9762\u524d\u4e24\u4e2a\u8bc1\u4e66\u65b9\u5f0f\u4f1a\u989d\u5916\u589e\u52a0\u4e00\u4e2a\u670d\u52a1\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-zealot"),": \u6838\u5fc3 Web \u548c API \u670d\u52a1"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-worker"),": \u6838\u5fc3\u5f02\u6b65\u4efb\u52a1\u670d\u52a1"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-postgres"),": \u6570\u636e\u5e93\u670d\u52a1"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-redis"),": \u7f13\u5b58\u670d\u52a1"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-web"),": \u63d0\u4f9b\uff08\u670d\u52a1\u548c\u8bc1\u4e66\uff09\u53cd\u4ee3\u7684\u7f51\u5173\u670d\u52a1\uff0c\u975e\u5fc5\u9700")),(0,n.kt)("h3",{id:"\u521b\u5efa\u6301\u4e45\u5316\u5b58\u50a8\u7684-docker-volumes"},"\u521b\u5efa\u6301\u4e45\u5316\u5b58\u50a8\u7684 docker volumes"),(0,n.kt)("p",null,"\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-data"),": \u9759\u6001\u8d44\u6e90\uff0cJS\u3001CSS\u3001\u56fe\u7247\u4ee5\u53ca\u4e0a\u4f20\u7684\u5e94\u7528\u3001\u5e94\u7528\u56fe\u6807\u548c\u8c03\u8bd5\u6587\u4ef6"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-postgres"),": \u6570\u636e\u5e93\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"zealot-redis"),": \u7f13\u5b58\u6570\u636e")),(0,n.kt)("h3",{id:"\u62c9\u53d6\u66f4\u65b0\u955c\u50cf"},"\u62c9\u53d6\uff08\u66f4\u65b0\uff09\u955c\u50cf"),(0,n.kt)("p",null,"\u7b2c\u4e00\u6b21\u4f7f\u7528\u4f1a\u81ea\u52a8\u4ece Docker hub \u4e0b\u8f7d\u955c\u50cf\uff0c\u540e\u7eed\u662f\u66f4\u65b0\u64cd\u4f5c\uff0c\u901a\u5e38\u53ea\u4f1a\u66f4\u65b0 zealot \u955c\u50cf\u3002\u5176\u4ed6\u51e0\u4e2a\u4f9d\u8d56\u670d\u52a1\u955c\u50cf\u90fd\u662f\u56fa\u5b9a\u7248\u672c\u53f7"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose pull\n")),(0,n.kt)("h3",{id:"\u8bbe\u7f6e\u6570\u636e\u5e93\u6570\u636e"},"\u8bbe\u7f6e\u6570\u636e\u5e93\u6570\u636e"),(0,n.kt)("p",null,"\u7b2c\u4e00\u6b21\u4f7f\u7528\u4f1a\u521d\u59cb\u5316\u6570\u636e\u5e93\u3001\u52a0\u8f7d\u8303\u4f8b\u5e94\u7528\u6570\u636e\u548c\u8bbe\u7f6e\u7ba1\u7406\u5458\u8d26\u53f7\uff0c\u540e\u7eed\u8fd9\u662f\u56e0 zealot \u66f4\u65b0\u9700\u8981\u7684\u64cd\u4f5c"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose run --rm zealot run_upgrade\n")),(0,n.kt)("h3",{id:"\u8fd0\u884c-docker-compose"},"\u8fd0\u884c docker-compose"),(0,n.kt)("p",null,"\u4e3a\u4e86\u5b89\u5168\u671f\u95f4\u548c\u7528\u6237\u7684\u81ea\u5b9a\u4e49\u64cd\u4f5c\u9700\u8981\u624b\u52a8\u6267\u884c\u6765\u8fd0\u884c\u670d\u52a1:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,n.kt)("h2",{id:"\u9ad8\u7ea7\u914d\u7f6e"},"\u9ad8\u7ea7\u914d\u7f6e"),(0,n.kt)("h3",{id:"\u81ea\u5b9a\u4e49-volume-\u8def\u5f84"},"\u81ea\u5b9a\u4e49 volume \u8def\u5f84"),(0,n.kt)("p",null,"\u81ea\u5b9a\u4e49\u8def\u5f84\u6709\u4e24\u79cd\u65b9\u6cd5: (\u5047\u8bbe\u81ea\u5b9a\u4e49\u7684\u8def\u5f84\u662f ",(0,n.kt)("inlineCode",{parentName:"p"},"/data/zealot"),")"),(0,n.kt)("h4",{id:"1-\u521b\u5efa-volume-\u81ea\u5b9a\u4e49\u8def\u5f84"},"1. \u521b\u5efa volume \u81ea\u5b9a\u4e49\u8def\u5f84"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"docker volume create --name zealot-data \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/zealot-data\n\ndocker volume create --name zealot-redis \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/redis\n\ndocker volume create --name zealot-postgres \\\n  --opt type=none \\\n  --opt o=bind \\\n  --opt device=/data/zealot/postgres\n")),(0,n.kt)("h4",{id:"2-\u4fee\u6539-docker-compose-\u7684-volumes-\u90e8\u5206"},"2. \u4fee\u6539 docker-compose \u7684 volumes \u90e8\u5206"),(0,n.kt)("p",null,"\u6253\u5f00 ",(0,n.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," \u62c9\u5230\u6700\u5e95\u90e8\u627e\u5230 ",(0,n.kt)("inlineCode",{parentName:"p"},"volumes:")," \u5f00\u5934\u7684\u90e8\u5206\uff0c\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"volumes:\n  zealot-data:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/data\n  zealot-redis:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/redis\n\n  zealot-postgres:\n    driver: local\n    driver_opts:\n      o: bind\n      type: none\n      device: /data/zealot/postgres\n")))}s.isMDXComponent=!0}}]);